# 工作计划 - 图片水印命令行工具

## 阶段 1: 项目初始化
1. 创建项目目录结构。
2. 初始化 Python 环境，创建 `requirements.txt` 文件。
3. 安装必要的依赖库：
   - `Pillow`
   - `piexif`
   - `argparse`
4. 配置 Git 仓库，添加 `.gitignore` 文件。

## 阶段 2: 核心功能开发

### 2.1 图片路径输入
1. 使用 `argparse` 实现命令行参数解析。
2. 支持用户输入单张图片路径或目录路径。
3. 校验用户输入的路径是否合法。

### 2.2 EXIF 信息读取
1. 使用 `piexif` 读取图片的 EXIF 信息。
2. 提取拍摄时间并格式化为 `YYYY-MM-DD`。
3. 处理无 EXIF 信息或无拍摄时间的情况，提供友好提示。

### 2.3 水印设置
1. 实现命令行参数支持以下选项：
   - 字体大小
   - 字体颜色
   - 水印位置（左上角、居中、右下角）
2. 设置默认值：
   - 字体大小：20
   - 字体颜色：黑色
   - 水印位置：右下角

### 2.4 水印绘制
1. 使用 `Pillow` 在图片上绘制水印。
2. 确保水印不影响原图片质量。
3. 处理不同分辨率和图片格式的兼容性。

### 2.5 图片保存
1. 创建新目录，命名为 `原目录名_watermark`。
2. 将处理后的图片保存到新目录中。
3. 确保原图片不被覆盖。

## 阶段 3: 测试与优化
1. 编写单元测试，覆盖以下场景：
   - 单张图片处理
   - 批量图片处理
   - 无效路径输入
   - 无 EXIF 信息的图片
2. 优化性能，确保批量处理效率。
3. 提供清晰的错误提示和日志信息。

## 阶段 4: 文档与交付
1. 编写用户使用说明文档：
   - 如何运行程序
   - 命令行参数说明
2. 更新 `README.md` 文件，包含项目简介和使用方法。
3. 提交代码并发布版本。

---

## 时间计划
- 阶段 1: 1 天
- 阶段 2: 3 天
- 阶段 3: 2 天
- 阶段 4: 1 天

总计: 7 天

---

如果需要调整计划或添加新功能，请及时更新此文档。